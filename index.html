<!DOCTYPE html>
<html lang="en" class="scroll-smooth snap-y snap-mandatory h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arjun Kalbag</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- GSAP for Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/ScrollTrigger.min.js"></script>

    <style>
        body {
            background-color: #050505;
            color: #e0e0e0;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            cursor: none; /* Hide default cursor */
        }
        
        .font-code {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Custom Cursor */
        #cursor {
            pointer-events: none;
            mix-blend-mode: difference;
            z-index: 9999;
        }

        /* Selection Color */
        ::selection {
            background-color: white;
            color: black;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #050505;
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Enforce Snap Stop */
        section {
            scroll-snap-stop: always;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Splash Screen -->
    <div id="splash" class="fixed inset-0 bg-black z-50 flex flex-col items-center justify-center">
        <div class="overflow-hidden">
            <h1 class="text-[20vw] font-black text-white leading-none tracking-tighter transform translate-y-[100%] opacity-0" id="splash-text">AK</h1>
        </div>
        <div class="h-[2px] bg-white mt-4 w-0" id="splash-line"></div>
    </div>

    <!-- Custom Cursor -->
    <div id="cursor" class="fixed top-0 left-0 w-4 h-4 bg-white rounded-full transform -translate-x-1/2 -translate-y-1/2 transition-transform duration-75 ease-out"></div>
    <div id="cursor-follower" class="fixed top-0 left-0 w-4 h-4 border border-white rounded-full transform -translate-x-1/2 -translate-y-1/2 pointer-events-none z-[9998] opacity-0 transition-opacity duration-300"></div>

    <!-- Background Canvas -->
    <canvas id="bg-canvas" class="fixed inset-0 z-0 opacity-60 pointer-events-none"></canvas>

    <!-- Main Content -->
    <main class="relative z-10 w-full max-w-[1600px] mx-auto px-4 sm:px-8 md:px-12 opacity-0" id="main-content">
        
        <!-- Hero Section -->
        <section class="h-screen flex flex-col justify-center pt-20 pb-10 relative snap-start" id="hero">
            <div class="space-y-6 md:space-y-8 parallax-element mt-16 md:mt-32">
                <p class="text-gray-400 tracking-widest text-sm md:text-base font-code uppercase ml-2 reveal-text">
                    <span id="loc-nyc" class="cursor-pointer transition-all duration-300 hover:text-blue-400 hover:drop-shadow-[0_0_8px_rgba(96,165,250,0.8)]">New York</span>
                    <span class="mx-2">/</span>
                    <span id="loc-stl" class="cursor-pointer transition-all duration-300 hover:text-blue-400 hover:drop-shadow-[0_0_8px_rgba(96,165,250,0.8)]">St. Louis</span>
                </p>
                
                <div class="hover-trigger" data-cursor="text">
                    <h1 class="text-[15vw] leading-[0.8] font-black tracking-tighter text-white mix-blend-exclusion reveal-text">
                        ARJUN<br />
                        <span class="text-gray-500 hover:text-white transition-colors duration-500">KALBAG</span>
                    </h1>
                </div>

                <!-- Tagline -->
                <p class="text-lg md:text-xl text-gray-400 font-code ml-2 mt-2 reveal-text tracking-widest cursor-default">
                    <span class="hover:text-blue-400 hover:drop-shadow-[0_0_10px_rgba(96,165,250,0.8)] transition-all duration-300">ENGINEERING</span> • 
                    <span class="hover:text-blue-400 hover:drop-shadow-[0_0_10px_rgba(96,165,250,0.8)] transition-all duration-300">ECONOMICS</span> • 
                    <a href="https://drive.google.com/drive/folders/1z-0ycJ5WCbNF71UemWRwg2YosB_MIm3E?usp=sharing" target="_blank" class="hover:text-blue-400 hover:drop-shadow-[0_0_10px_rgba(96,165,250,0.8)] transition-all duration-300 hover-trigger" data-cursor="link">SOUND</a>
                </p>

                <!-- Phrase/Description Section -->
                <div class="ml-2 mt-6 space-y-3 reveal-text delay-75">
                    <!-- The Phrase -->
                    <h2 class="text-2xl md:text-3xl font-medium text-blue-400 font-code tracking-tight">
                        Computer Engineering & Economics at WashU
                    </h2>
                    <!-- The Description -->
                    <p class="text-xl md:text-2xl font-light text-gray-300 max-w-2xl leading-relaxed">
                        Building the intersection of hardware, sound, and strategy.
                    </p>
                </div>

                <!-- Social Logos -->
                <div class="flex gap-8 pt-8 ml-2 reveal-text delay-100">
                    <a href="https://linkedin.com/in/arjun-kalbag/" target="_blank" class="text-gray-400 hover:text-[#0077b5] transition-colors hover:scale-110 duration-300 hover-trigger" data-cursor="link" aria-label="LinkedIn">
                        <i data-lucide="linkedin" class="w-8 h-8"></i>
                    </a>
                    <a href="https://github.com/arjunkalbag" target="_blank" class="text-gray-400 hover:text-white transition-colors hover:scale-110 duration-300 hover-trigger" data-cursor="link" aria-label="GitHub">
                        <i data-lucide="github" class="w-8 h-8"></i>
                    </a>
                    <a href="mailto:arjunkalbag07@gmail.com" class="text-gray-400 hover:text-blue-400 transition-colors hover:scale-110 duration-300 hover-trigger" data-cursor="link" aria-label="Email">
                        <i data-lucide="mail" class="w-8 h-8"></i>
                    </a>
                </div>
            </div>
            
            <!-- Scroll Indicator -->
            <!-- Wrapped to separate GSAP transform (reveal) from CSS transform (bounce) -->
            <div class="absolute bottom-10 left-1/2 -translate-x-1/2 z-40 reveal-text delay-300">
                <div id="scroll-indicator" class="animate-bounce cursor-pointer hover-trigger" data-cursor="link">
                    <i data-lucide="mouse" class="w-8 h-8 text-gray-500"></i>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="min-h-screen flex flex-col justify-center py-24 md:py-32 relative scroll-section snap-start">
            <div class="grid grid-cols-1 md:grid-cols-12 gap-10">
                <!-- Removed sticky top-32 and glitch-header classes -->
                <div class="md:col-span-4 text-gray-500 uppercase tracking-widest text-sm font-bold h-fit font-code">
                    01 / Statement
                </div>
                <div class="md:col-span-8 text-xl md:text-2xl lg:text-3xl font-light font-code leading-relaxed text-gray-300 hover-trigger" data-cursor="text">
                    <p class="mb-6 reveal-up">
                        I’m a Computer Engineering and Economics student from NYC at Washington University in St. Louis with a strong interest complex systems. My background spans hardware and software systems, data analysis, and market evaluation. These skills have helped me develop a strong ability to bridge technical development with business growth in analytically rigorous environments. In my free time I like to produce music, read, and build side projects.
                    </p>
                </div>
            </div>
        </section>

        <!-- Experience Section -->
        <section class="min-h-screen flex flex-col justify-center py-24 md:py-32 scroll-section snap-start">
            <div class="grid grid-cols-1 md:grid-cols-12 gap-10">
                <!-- Removed sticky top-32 and glitch-header classes -->
                <div class="md:col-span-4 text-gray-500 uppercase tracking-widest text-sm font-bold h-fit font-code">
                    02 / Experience
                </div>
                <div class="md:col-span-8 space-y-20">
                    
                    <!-- Infinite Goods -->
                    <div id="exp-infinite" class="group relative pl-8 border-l border-white/10 hover:border-blue-500 transition-colors duration-300 reveal-up hover-trigger" data-cursor="text">
                        <div class="absolute -left-[20px] top-0 bg-black p-2 rounded-full border border-white/20 group-hover:border-blue-500 group-hover:scale-110 transition-all">
                            <i data-lucide="trending-up" class="w-5 h-5 text-gray-400 group-hover:text-blue-400"></i>
                        </div>
                        <h3 class="text-3xl md:text-5xl font-bold text-white mb-2">Infinite Goods</h3>
                        <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-4 mb-4 text-gray-400 font-code">
                            <span class="text-lg font-medium text-blue-400">Business Development Intern</span>
                            <span class="hidden md:block">•</span>
                            <span class="text-sm">May 2023 – Jan 2024</span>
                        </div>
                        <p class="text-lg text-gray-300 max-w-2xl font-code">Backend automation for onboarding, 350% integration speedup. Led cold outreach to 100+ founders.</p>
                    </div>

                    <!-- Carter Burden -->
                    <div id="exp-cbn" class="group relative pl-8 border-l border-white/10 hover:border-blue-500 transition-colors duration-300 reveal-up hover-trigger" data-cursor="text">
                        <div class="absolute -left-[20px] top-0 bg-black p-2 rounded-full border border-white/20 group-hover:border-blue-500 group-hover:scale-110 transition-all">
                            <i data-lucide="users" class="w-5 h-5 text-gray-400 group-hover:text-blue-400"></i>
                        </div>
                        <h3 class="text-3xl md:text-5xl font-bold text-white mb-2">Carter Burden Network</h3>
                        <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-4 mb-4 text-gray-400 font-code">
                            <span class="text-lg font-medium text-blue-400">Board Member</span>
                            <span class="hidden md:block">•</span>
                            <span class="text-sm">Jun 2023 – Aug 2025</span>
                        </div>
                        <p class="text-lg text-gray-300 max-w-2xl font-code">Led community engagement including a prom for 250+ seniors. Contributed to strategy & finance across 20+ board meetings.</p>
                    </div>

                    <!-- SAVNY -->
                    <div id="exp-savny" class="group relative pl-8 border-l border-white/10 hover:border-blue-500 transition-colors duration-300 reveal-up hover-trigger" data-cursor="text">
                        <div class="absolute -left-[20px] top-0 bg-black p-2 rounded-full border border-white/20 group-hover:border-blue-500 group-hover:scale-110 transition-all">
                            <i data-lucide="globe" class="w-5 h-5 text-gray-400 group-hover:text-blue-400"></i>
                        </div>
                        <h3 class="text-3xl md:text-5xl font-bold text-white mb-2">SAVNY</h3>
                        <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-4 mb-4 text-gray-400 font-code">
                            <span class="text-lg font-medium text-blue-400">Co-founder & Head</span>
                            <span class="hidden md:block">•</span>
                            <span class="text-sm">Oct 2023 – Jun 2025</span>
                        </div>
                        <p class="text-lg text-gray-300 max-w-2xl font-code">Organized 250+ students for community service. Coordinated 30+ service opportunities and cultural programming.</p>
                    </div>

                    <!-- NYU Music -->
                    <div id="exp-nyu" class="group relative pl-8 border-l border-white/10 hover:border-blue-500 transition-colors duration-300 reveal-up hover-trigger" data-cursor="text">
                        <div class="absolute -left-[20px] top-0 bg-black p-2 rounded-full border border-white/20 group-hover:border-blue-500 group-hover:scale-110 transition-all">
                            <i data-lucide="music" class="w-5 h-5 text-gray-400 group-hover:text-blue-400"></i>
                        </div>
                        <h3 class="text-3xl md:text-5xl font-bold text-white mb-2">NYU Music Tech</h3>
                        <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-4 mb-4 text-gray-400 font-code">
                            <span class="text-lg font-medium text-blue-400">Research Assistant</span>
                            <span class="hidden md:block">•</span>
                            <span class="text-sm">Jan 2024 – Jun 2025</span>
                        </div>
                        <p class="text-lg text-gray-300 max-w-2xl font-code">Engineered multi-channel audio systems. Executed post-production & 45-track arrangement for Harvestworks concert.</p>
                    </div>

                </div>
            </div>
        </section>

        <!-- WashU Section -->
        <section class="min-h-screen flex flex-col justify-center py-24 md:py-32 bg-white/5 rounded-3xl mx-[-1rem] md:mx-0 px-4 md:px-12 backdrop-blur-sm scroll-section snap-start">
            <div class="mb-16 reveal-up">
                <!-- Removed sticky top-32 and glitch-header classes -->
                <span class="text-blue-400 uppercase tracking-widest text-sm font-bold block mb-4 font-code">03 / Campus Life</span>
                <h2 class="text-4xl md:text-6xl font-black text-white">WASHINGTON UNIVERSITY</h2>
                <p class="text-xl text-gray-400 mt-2 font-code">Class of 2029 • St. Louis, MO</p>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Card 1 -->
                <div id="washu-cyc" class="bg-black/40 p-6 rounded-xl border border-white/5 hover:border-blue-500/50 hover:bg-black/60 transition-all duration-300 group reveal-up hover-trigger" data-cursor="text">
                    <i data-lucide="users" class="w-7 h-7 text-gray-500 group-hover:text-blue-400 mb-4"></i>
                    <h4 class="text-lg font-bold text-gray-200 group-hover:text-white">Consult Your Community</h4>
                    <p class="text-sm text-gray-500 font-code mt-1 group-hover:text-gray-400">Associate Consultant + Head of Client Recruitment</p>
                </div>
                 <!-- Card 2 -->
                 <div id="washu-wc" class="bg-black/40 p-6 rounded-xl border border-white/5 hover:border-blue-500/50 hover:bg-black/60 transition-all duration-300 group reveal-up hover-trigger" data-cursor="text">
                    <i data-lucide="users" class="w-7 h-7 text-gray-500 group-hover:text-blue-400 mb-4"></i>
                    <h4 class="text-lg font-bold text-gray-200 group-hover:text-white">WashU Consulting</h4>
                    <p class="text-sm text-gray-500 font-code mt-1 group-hover:text-gray-400">First Year Rep</p>
                </div>
                 <!-- Card 3 -->
                 <div id="washu-sif" class="bg-black/40 p-6 rounded-xl border border-white/5 hover:border-blue-500/50 hover:bg-black/60 transition-all duration-300 group reveal-up hover-trigger" data-cursor="text">
                    <i data-lucide="trending-up" class="w-7 h-7 text-gray-500 group-hover:text-blue-400 mb-4"></i>
                    <h4 class="text-lg font-bold text-gray-200 group-hover:text-white">Student Investment Fund</h4>
                    <p class="text-sm text-gray-500 font-code mt-1 group-hover:text-gray-400">Senior Analyst</p>
                </div>
                 <!-- Card 4 -->
                 <div id="washu-kwur" class="bg-black/40 p-6 rounded-xl border border-white/5 hover:border-blue-500/50 hover:bg-black/60 transition-all duration-300 group reveal-up hover-trigger" data-cursor="text">
                    <i data-lucide="radio" class="w-7 h-7 text-gray-500 group-hover:text-blue-400 mb-4"></i>
                    <h4 class="text-lg font-bold text-gray-200 group-hover:text-white">KWUR 90.3 FM</h4>
                    <p class="text-sm text-gray-500 font-code mt-1 group-hover:text-gray-400">Disc Jockey</p>
                </div>
                 <!-- Card 5 -->
                 <div id="washu-strike" class="bg-black/40 p-6 rounded-xl border border-white/5 hover:border-blue-500/50 hover:bg-black/60 transition-all duration-300 group reveal-up hover-trigger" data-cursor="text">
                    <i data-lucide="music" class="w-7 h-7 text-gray-500 group-hover:text-blue-400 mb-4"></i>
                    <h4 class="text-lg font-bold text-gray-200 group-hover:text-white">Strike Magazine</h4>
                    <p class="text-sm text-gray-500 font-code mt-1 group-hover:text-gray-400">Music Director</p>
                </div>
                 <!-- Card 6 -->
                 <div id="washu-ashoka" class="bg-black/40 p-6 rounded-xl border border-white/5 hover:border-blue-500/50 hover:bg-black/60 transition-all duration-300 group reveal-up hover-trigger" data-cursor="text">
                    <i data-lucide="globe" class="w-7 h-7 text-gray-500 group-hover:text-blue-400 mb-4"></i>
                    <h4 class="text-lg font-bold text-gray-200 group-hover:text-white">Ashoka</h4>
                    <p class="text-sm text-gray-500 font-code mt-1 group-hover:text-gray-400">Social Chair</p>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section class="min-h-screen flex flex-col justify-center py-24 md:py-32 scroll-section snap-start">
            <div class="grid grid-cols-1 md:grid-cols-12 gap-10">
                <!-- Removed sticky top-32 and glitch-header classes -->
                <div class="md:col-span-4 text-gray-500 uppercase tracking-widest text-sm font-bold h-fit font-code">
                    04 / Selected Works
                </div>
                <div class="md:col-span-8 space-y-12">
                    
                    <!-- Project 1 (CPU) -->
                    <div id="project-cpu" class="group border-t border-white/20 pt-8 reveal-up hover-trigger" data-cursor="text">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center gap-3">
                                <div class="p-2 bg-white/5 rounded-lg text-blue-400">
                                    <i data-lucide="cpu" class="w-6 h-6"></i>
                                </div>
                                <h3 class="text-3xl font-bold text-white group-hover:text-blue-400 transition-colors">16-Bit CPU Architecture</h3>
                            </div>
                            <i data-lucide="arrow-right" class="w-6 h-6 text-gray-600 group-hover:text-white transform -rotate-45 group-hover:rotate-0 transition-transform duration-300"></i>
                        </div>
                        <div class="flex gap-2 mb-4 flex-wrap">
                            <span class="text-xs font-code px-2 py-1 border border-white/10 rounded-full text-gray-400 uppercase">Computer Engineering</span>
                            <span class="text-xs font-code px-2 py-1 border border-white/10 rounded-full text-gray-400 uppercase">Hardware</span>
                        </div>
                        <p class="text-lg text-gray-400 leading-relaxed max-w-2xl group-hover:text-gray-200 transition-colors font-code">
                            A 2-year independent study building a 16-bit CPU from scratch using advanced computer & electrical engineering principles. Currently under active development.
                        </p>
                    </div>

                    <!-- Project 2 (Record Player) -->
                    <div id="project-record" class="group border-t border-white/20 pt-8 reveal-up hover-trigger" data-cursor="text">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center gap-3">
                                <div class="p-2 bg-white/5 rounded-lg text-blue-400">
                                    <i data-lucide="disc" class="w-6 h-6"></i>
                                </div>
                                <h3 class="text-3xl font-bold text-white group-hover:text-blue-400 transition-colors">IoT Digital Record Player</h3>
                            </div>
                            <i data-lucide="arrow-right" class="w-6 h-6 text-gray-600 group-hover:text-white transform -rotate-45 group-hover:rotate-0 transition-transform duration-300"></i>
                        </div>
                        <div class="flex gap-2 mb-4 flex-wrap">
                            <span class="text-xs font-code px-2 py-1 border border-white/10 rounded-full text-gray-400 uppercase">IoT</span>
                            <span class="text-xs font-code px-2 py-1 border border-white/10 rounded-full text-gray-400 uppercase">NFC</span>
                        </div>
                        <p class="text-lg text-gray-400 leading-relaxed max-w-2xl group-hover:text-gray-200 transition-colors font-code">
                            Designed and built a digital record player from scratch, integrating NFC technology to bridge physical media with digital streaming.
                        </p>
                    </div>

                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="py-20 border-t border-white/10 mt-20 reveal-up snap-start">
            <div class="flex flex-col items-start gap-8">
                
                <div class="flex gap-4">
                    <a href="https://linkedin.com/in/arjun-kalbag/" target="_blank" class="footer-icon hover-trigger" data-cursor="link">
                        <i data-lucide="linkedin" class="w-6 h-6 text-gray-300"></i>
                    </a>
                    <a href="https://github.com/arjunkalbag" target="_blank" class="footer-icon hover-trigger" data-cursor="link">
                        <i data-lucide="github" class="w-6 h-6 text-gray-300"></i>
                    </a>
                    <a href="mailto:arjunkalbag07@gmail.com" class="footer-icon hover-trigger" data-cursor="link">
                        <i data-lucide="mail" class="w-6 h-6 text-gray-300"></i>
                    </a>
                </div>
                <div class="text-left">
                    <p class="text-gray-500 text-sm font-code">Designed & Built by Arjun Kalbag</p>
                    <p class="text-gray-600 text-xs mt-1 font-code">© 2026 All Rights Reserved</p>
                </div>
            </div>
        </footer>

    </main>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // 1. Initialize Icons
        lucide.createIcons();

        // 2. Custom Cursor Logic
        const cursor = document.getElementById('cursor');
        const follower = document.getElementById('cursor-follower');
        const hoverTriggers = document.querySelectorAll('.hover-trigger');

        let mouseX = 0;
        let mouseY = 0;

        gsap.set(cursor, { xPercent: -50, yPercent: -50 });
        gsap.set(follower, { xPercent: -50, yPercent: -50 });

        window.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            gsap.to(cursor, { x: mouseX, y: mouseY, duration: 0.1 });
            gsap.to(follower, { x: mouseX, y: mouseY, duration: 0.6, ease: "power2.out" });
        });

        // Hover Effects (General)
        hoverTriggers.forEach(el => {
            el.addEventListener('mouseenter', () => {
                const type = el.getAttribute('data-cursor');
                if (type === 'text') {
                    gsap.to(cursor, { scale: 5, backgroundColor: 'white', mixBlendMode: 'difference' });
                } else if (type === 'link') {
                    gsap.to(cursor, { scale: 3, backgroundColor: '#3b82f6', mixBlendMode: 'normal', opacity: 0.8 });
                }
            });

            el.addEventListener('mouseleave', () => {
                gsap.to(cursor, { scale: 1, backgroundColor: 'white', mixBlendMode: 'difference', opacity: 1 });
            });
        });

        window.addEventListener('click', (e) => {
            const ripple = document.createElement('div');
            ripple.className = 'fixed rounded-full border border-white pointer-events-none z-[99]';
            ripple.style.left = `${e.clientX}px`;
            ripple.style.top = `${e.clientY}px`;
            ripple.style.width = '40px';
            ripple.style.height = '40px';
            ripple.style.transform = 'translate(-50%, -50%) scale(0)';
            document.body.appendChild(ripple);

            gsap.to(ripple, {
                scale: 3,
                opacity: 0,
                duration: 0.6,
                onComplete: () => ripple.remove()
            });
        });

        // 3. Splash Screen Animation
        window.onload = () => {
            const tl = gsap.timeline();

            tl.to("#splash-text", {
                y: 0,
                opacity: 1,
                duration: 1,
                ease: "power4.out"
            })
            .to("#splash-line", {
                width: 200,
                duration: 1,
                ease: "power2.inOut"
            })
            .to(["#splash-text", "#splash-line"], {
                y: -50,
                opacity: 0,
                duration: 0.8,
                ease: "power2.in",
                delay: 0.5
            })
            .to("#splash", {
                opacity: 0,
                duration: 0.5,
                onComplete: () => {
                    document.getElementById('splash').style.display = 'none';
                }
            })
            .to("#main-content", {
                opacity: 1,
                duration: 1
            }, "-=0.2")
            .from(".reveal-text", {
                y: 50,
                opacity: 0,
                stagger: 0.1,
                duration: 0.8,
                ease: "power2.out"
            }, "-=0.5");
        };

        // 4. Scroll Animations
        gsap.registerPlugin(ScrollTrigger);

        gsap.to(".parallax-element", {
            y: 150,
            opacity: 0,
            scrollTrigger: {
                trigger: "#hero",
                start: "top top",
                end: "bottom top",
                scrub: true
            }
        });
        
        // Scroll Indicator Click & Fade Logic
        const scrollIndicator = document.getElementById('scroll-indicator');
        if (scrollIndicator) {
            // Click to scroll
            scrollIndicator.addEventListener('click', () => {
                const aboutSection = document.getElementById('about');
                if (aboutSection) {
                    aboutSection.scrollIntoView({ behavior: 'smooth' });
                }
            });
        }

        const sections = document.querySelectorAll(".reveal-up");
        sections.forEach(section => {
            gsap.from(section, {
                y: 50,
                opacity: 0,
                duration: 0.8,
                ease: "power2.out",
                scrollTrigger: {
                    trigger: section,
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // 5. Interactive Background Canvas with Shape Morphing
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];
        let interactionMode = 'random'; // 'random', 'shape'
        let isAKMode = false; // State for the "0" key toggle

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            initParticles();
        }

        function initParticles() {
            particles = [];
            // Create particles - Significantly increased for high fidelity shapes
            const particleCount = width < 768 ? 200 : 400; 
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    vx: (Math.random() - 0.5) * 0.3,
                    vy: (Math.random() - 0.5) * 0.3,
                    size: Math.random() * 2 + 1,
                    z: Math.random() * 2,
                    tx: 0, // Target X
                    ty: 0  // Target Y
                });
            }
        }

        // Shape Formation Logic
        function formShape(type) {
            interactionMode = 'shape';
            const cx = width / 2;
            const cy = height / 2;
            const count = particles.length;

            if (type === 'cpu') {
                // ... (existing CPU logic) ...
                // CPU: Square Outline + Inner Grid + Pins
                const size = 140; 
                const halfSize = size / 2;
                
                // Allocation
                const perimeterCount = Math.floor(count * 0.4);
                const pinCount = Math.floor(count * 0.3);
                const innerCount = count - perimeterCount - pinCount;

                particles.forEach((p, i) => {
                    if (i < perimeterCount) {
                        const perimeterLen = size * 4;
                        const pos = (i / perimeterCount) * perimeterLen;
                        if (pos < size) { p.tx = (cx - halfSize) + pos; p.ty = cy - halfSize; } 
                        else if (pos < size * 2) { p.tx = cx + halfSize; p.ty = (cy - halfSize) + (pos - size); } 
                        else if (pos < size * 3) { p.tx = (cx + halfSize) - (pos - size * 2); p.ty = cy + halfSize; } 
                        else { p.tx = cx - halfSize; p.ty = (cy + halfSize) - (pos - size * 3); }
                    } else if (i < perimeterCount + pinCount) {
                        const pinIndex = i - perimeterCount;
                        const pinsPerSide = Math.floor(pinCount / 4);
                        const side = Math.floor(pinIndex / pinsPerSide) % 4;
                        const sideIndex = pinIndex % pinsPerSide;
                        const spacing = size / pinsPerSide;
                        const offset = (sideIndex * spacing) - halfSize + (spacing/2);
                        const pinLen = 25;
                        if (side === 0) { p.tx = cx + offset; p.ty = cy - halfSize - pinLen; } 
                        else if (side === 1) { p.tx = cx + halfSize + pinLen; p.ty = cy + offset; } 
                        else if (side === 2) { p.tx = cx + offset; p.ty = cy + halfSize + pinLen; } 
                        else { p.tx = cx - halfSize - pinLen; p.ty = cy + offset; }
                    } else {
                        const innerIndex = i - perimeterCount - pinCount;
                        const gridSide = Math.ceil(Math.sqrt(innerCount));
                        const step = (size * 0.6) / gridSide; 
                        const start = -(size * 0.6) / 2;
                        const row = Math.floor(innerIndex / gridSide);
                        const col = innerIndex % gridSide;
                        p.tx = cx + start + col * step + step/2;
                        p.ty = cy + start + row * step + step/2;
                    }
                });

            } else if (type === 'record') {
                // ... (existing Record logic) ...
                particles.forEach((p, i) => {
                    let radius, angle;
                    if (i < count * 0.3) {
                        radius = 40 + Math.random() * 2; 
                        angle = (i / (count * 0.3)) * Math.PI * 2;
                    } else {
                        radius = 100 + Math.random() * 2;
                        angle = ((i - count * 0.3) / (count * 0.7)) * Math.PI * 2;
                    }
                    p.tx = cx + Math.cos(angle) * radius;
                    p.ty = cy + Math.sin(angle) * radius;
                });

            } else if (type === 'infinity') {
                // ... (existing Infinity logic) ...
                const a = 200; 
                particles.forEach((p, i) => {
                    const t = (i / count) * Math.PI * 2;
                    const denom = 1 + Math.sin(t) * Math.sin(t);
                    p.tx = cx + (a * Math.cos(t)) / denom;
                    p.ty = cy + (a * Math.sin(t) * Math.cos(t)) / denom;
                });

            } else if (type === 'cbn') {
                // ... (existing CBN logic) ...
                const letterW = 80; const letterH = 120; const gap = 40; const totalWidth = (letterW * 3) + (gap * 2); const startX = cx - (totalWidth / 2); const strokeWidth = 12;
                particles.forEach((p, i) => {
                    const group = Math.floor((i / count) * 3); const localI = i % Math.floor(count / 3); const localTotal = Math.floor(count / 3); const progress = localI / localTotal;
                    const jitterX = (Math.random() - 0.5) * strokeWidth; const jitterY = (Math.random() - 0.5) * strokeWidth;
                    let lx = 0, ly = 0;
                    if (group === 0) { 
                        const cCenterX = startX + letterW/2; const cCenterY = cy; const angle = Math.PI * 0.2 + progress * (Math.PI * 1.6);
                        lx = cCenterX + Math.cos(angle) * (letterW/2); ly = cCenterY + Math.sin(angle) * (letterH/2);
                    } else if (group === 1) { 
                        const bX = startX + letterW + gap;
                        if (progress < 0.4) { lx = bX; ly = cy - letterH/2 + (progress/0.4) * letterH; } 
                        else if (progress < 0.7) { const loopProg = (progress - 0.4) / 0.3; const angle = -Math.PI/2 + loopProg * Math.PI; lx = bX + Math.cos(angle) * (letterW * 0.6); ly = cy - letterH/4 + Math.sin(angle) * (letterH/4); } 
                        else { const loopProg = (progress - 0.7) / 0.3; const angle = -Math.PI/2 + loopProg * Math.PI; lx = bX + Math.cos(angle) * (letterW * 0.7); ly = cy + letterH/4 + Math.sin(angle) * (letterH/4); }
                    } else { 
                        const nX = startX + (letterW + gap) * 2;
                        if (progress < 0.35) { lx = nX; ly = cy + letterH/2 - (progress/0.35) * letterH; } 
                        else if (progress < 0.65) { const diagProg = (progress - 0.35) / 0.3; lx = nX + diagProg * letterW; ly = cy - letterH/2 + diagProg * letterH; } 
                        else { const vertProg = (progress - 0.65) / 0.35; lx = nX + letterW; ly = cy + letterH/2 - vertProg * letterH; }
                    }
                    p.tx = lx + jitterX; p.ty = ly + jitterY;
                });

            } else if (type === 'globe') {
                // ... (existing Globe logic) ...
                const radius = 130; const tilt = 0.5; const silhouetteLimit = Math.floor(count * 0.3); const latLimit = Math.floor(count * 0.6); const latCount = 5; const longCount = 8;
                particles.forEach((p, i) => {
                    let x, y, z;
                    if (i < silhouetteLimit) { const angle = (i / silhouetteLimit) * Math.PI * 2; p.tx = cx + radius * Math.cos(angle); p.ty = cy + radius * Math.sin(angle); return; }
                    if (i < latLimit) { 
                        const subsetSize = latLimit - silhouetteLimit; const idx = i - silhouetteLimit; const latGroupSize = Math.floor(subsetSize / latCount); const latIndex = Math.min(Math.floor(idx / latGroupSize), latCount - 1); const latProg = (idx % latGroupSize) / latGroupSize;
                        const phi = (Math.PI * 0.15) + (latIndex / (latCount - 1)) * (Math.PI * 0.7); const theta = latProg * Math.PI * 2;
                        x = radius * Math.sin(phi) * Math.cos(theta); z = radius * Math.sin(phi) * Math.sin(theta); y = radius * Math.cos(phi);
                    } else { 
                        const subsetSize = count - latLimit; const idx = i - latLimit; const longGroupSize = Math.floor(subsetSize / longCount); const longIndex = Math.min(Math.floor(idx / longGroupSize), longCount - 1); const longProg = (idx % longGroupSize) / longGroupSize;
                        const theta = (longIndex / longCount) * Math.PI * 2; const phi = longProg * Math.PI;
                        x = radius * Math.sin(phi) * Math.cos(theta); z = radius * Math.sin(phi) * Math.sin(theta); y = radius * Math.cos(phi);
                    }
                    const rotY = y * Math.cos(tilt) - z * Math.sin(tilt); p.tx = cx + x; p.ty = cy + rotY;
                });

            } else if (type === 'nyu') {
                // ... (existing NYU logic) ...
                const torchHeight = 90; const textY = cy + 50; const strokeWidth = 10; const letterW = 50; const letterH = 60; const gap = 20; const totalTextW = (letterW * 3) + (gap * 2); const textStartX = cx - (totalTextW / 2);
                particles.forEach((p, i) => {
                    const jitterX = (Math.random() - 0.5) * strokeWidth; const jitterY = (Math.random() - 0.5) * strokeWidth;
                    if (i < count * 0.25) { const progress = i / (count * 0.25); const w = 50 * Math.sin(progress * Math.PI); const h = torchHeight; const x = (Math.random() - 0.5) * w; const y = -progress * h; p.tx = cx + x; p.ty = cy + 10 + y; } 
                    else {
                        const textIndex = i - Math.floor(count * 0.25); const textTotal = count - Math.floor(count * 0.25); const group = Math.floor((textIndex / textTotal) * 3); const progress = (textIndex % (textTotal/3)) / (textTotal/3);
                        let lx=0, ly=0;
                        if (group === 0) { const currentX = textStartX; if (progress < 0.35) { lx = currentX; ly = textY - letterH/2 + (progress/0.35)*letterH; } else if (progress < 0.7) { const p2 = (progress-0.35)/0.35; lx = currentX + p2*letterW; ly = textY - letterH/2 + p2*letterH; } else { const p3 = (progress-0.7)/0.3; lx = currentX + letterW; ly = textY + letterH/2 - p3*letterH; } } 
                        else if (group === 1) { const currentX = textStartX + letterW + gap; if (progress < 0.33) { const p2 = progress/0.33; lx = currentX + (p2 - 0.5)*letterW + (letterW/2); ly = textY - letterH/2 + p2*(letterH/2); } else if (progress < 0.66) { const p2 = (progress-0.33)/0.33; lx = currentX + letterW - (p2*0.5*letterW); ly = textY - letterH/2 + p2*(letterH/2); } else { const p2 = (progress-0.66)/0.34; lx = currentX + letterW/2; ly = textY + (p2 * letterH/2); } } 
                        else { const currentX = textStartX + (letterW + gap) * 2; if (progress < 0.4) { lx = currentX; ly = textY - letterH/2 + (progress/0.4)*letterH; } else if (progress < 0.7) { const p2 = (progress-0.4)/0.3; lx = currentX + p2*letterW; ly = textY + letterH/2; } else { const p2 = (progress-0.7)/0.3; lx = currentX + letterW; ly = textY + letterH/2 - p2*letterH; } }
                        p.tx = lx + jitterX; p.ty = ly + jitterY;
                    }
                });
                
            } else if (type === 'community') {
                // ... (existing Community logic) ...
                particles.forEach((p, i) => {
                    const group = Math.floor((i / count) * 3); const subProgress = (i % Math.floor(count/3)) / Math.floor(count/3);
                    let centerX, centerY, scale;
                    if (group === 0) { centerX = cx; centerY = cy - 10; scale = 1.2; } else if (group === 1) { centerX = cx - 60; centerY = cy + 10; scale = 0.9; } else { centerX = cx + 60; centerY = cy + 10; scale = 0.9; }
                    if (subProgress < 0.3) { const angle = subProgress * (1/0.3) * Math.PI * 2; const r = 15 * scale; p.tx = centerX + Math.cos(angle) * r; p.ty = (centerY - 30 * scale) + Math.sin(angle) * r; } 
                    else { const arcProg = (subProgress - 0.3) / 0.7; const angle = Math.PI - (arcProg * Math.PI); const r = 35 * scale; const fillR = r * (0.8 + Math.random()*0.2); p.tx = centerX + Math.cos(angle) * fillR; p.ty = (centerY + 10 * scale) - Math.sin(angle) * fillR * 0.6; }
                });

            } else if (type === 'stock') {
                // ... (existing Stock logic) ...
                const points = [{x: -120, y: 60}, {x: -70, y: 20}, {x: -30, y: 50}, {x: 20, y: -20}, {x: 70, y: 10}, {x: 120, y: -70}];
                particles.forEach((p, i) => {
                    const segmentCount = points.length - 1; const particlesPerSeg = Math.floor(count / segmentCount); const segIndex = Math.min(Math.floor(i / particlesPerSeg), segmentCount - 1); const prog = (i % particlesPerSeg) / particlesPerSeg;
                    const p1 = points[segIndex]; const p2 = points[segIndex + 1]; const scatter = (Math.random() - 0.5) * 4;
                    p.tx = cx + p1.x + (p2.x - p1.x) * prog + scatter; p.ty = cy + p1.y + (p2.y - p1.y) * prog + scatter;
                });

            } else if (type === 'wave') {
                // ... (existing Wave logic) ...
                particles.forEach((p, i) => {
                    const line = Math.floor((i/count) * 3); const prog = (i % Math.floor(count/3)) / Math.floor(count/3); const width = 240; const x = (prog * width) - (width/2);
                    const freq = 0.05; let amp = 40; if (line === 0) amp = 20; if (line === 2) amp = 60; const y = Math.sin(x * freq + (line * Math.PI/4)) * amp; p.tx = cx + x; p.ty = cy + y;
                });

            } else if (type === 'music') {
                // ... (existing Music logic) ...
                const headY = cy + 40; const headR = 15; const stemH = 70; const noteX1 = cx - 30; const noteX2 = cx + 40;
                particles.forEach((p, i) => {
                    const section = Math.floor((i/count) * 5); const prog = (i % Math.floor(count/5)) / Math.floor(count/5);
                    if (section === 0) { const angle = prog * Math.PI * 2; const r = Math.random() * headR; p.tx = noteX1 + Math.cos(angle) * r; p.ty = headY + Math.sin(angle) * (r*0.8); } 
                    else if (section === 1) { const angle = prog * Math.PI * 2; const r = Math.random() * headR; p.tx = noteX2 + Math.cos(angle) * r; p.ty = (headY - 10) + Math.sin(angle) * (r*0.8); } 
                    else if (section === 2) { p.tx = noteX1 + 10; p.ty = headY - (prog * stemH); } 
                    else if (section === 3) { p.tx = noteX2 + 10; p.ty = (headY - 10) - (prog * stemH); } 
                    else { const startX = noteX1 + 10; const startY = headY - stemH; const endX = noteX2 + 10; const endY = (headY - 10) - stemH; const beamThick = 15; const thicknessOffset = (Math.random()) * beamThick; p.tx = startX + (endX - startX) * prog; p.ty = startY + (endY - startY) * prog + thicknessOffset; }
                });
            } else if (type === 'AK') {
                // ... (existing AK logic) ...
                const strokeWidth = 25; // Thick stroke
                const widthA = 120;
                const widthK = 100;
                const gap = 40;
                const totalW = widthA + widthK + gap;
                const heightLetter = 160;
                
                const startX = cx - totalW / 2;
                const bottomY = cy + heightLetter / 2;
                const topY = cy - heightLetter / 2;

                particles.forEach((p, i) => {
                    // Split into two groups for A and K
                    // 55% for A (more strokes), 45% for K
                    const isA = i < count * 0.55;
                    const groupI = isA ? i : i - Math.floor(count * 0.55);
                    const groupTotal = isA ? Math.floor(count * 0.55) : count - Math.floor(count * 0.55);
                    const progress = groupI / groupTotal;

                    // Jitter for boldness
                    const jitterX = (Math.random() - 0.5) * strokeWidth;
                    const jitterY = (Math.random() - 0.5) * strokeWidth;

                    if (isA) {
                        // Letter A
                        // 40% Left Leg, 40% Right Leg, 20% Cross Bar
                        if (progress < 0.4) {
                            // Left Leg / (Bottom Left to Top Center)
                            const legProg = progress / 0.4;
                            const x1 = startX; 
                            const y1 = bottomY;
                            const x2 = startX + widthA / 2;
                            const y2 = topY;
                            p.tx = x1 + (x2 - x1) * legProg + jitterX;
                            p.ty = y1 + (y2 - y1) * legProg + jitterY;
                        } else if (progress < 0.8) {
                            // Right Leg \ (Top Center to Bottom Right)
                            const legProg = (progress - 0.4) / 0.4;
                            const x1 = startX + widthA / 2;
                            const y1 = topY;
                            const x2 = startX + widthA;
                            const y2 = bottomY;
                            p.tx = x1 + (x2 - x1) * legProg + jitterX;
                            p.ty = y1 + (y2 - y1) * legProg + jitterY;
                        } else {
                            // Cross Bar -
                            const barProg = (progress - 0.8) / 0.2;
                            const barY = cy + 20; // Slightly below center
                            const barWidthFactor = 0.5; // Width of bar relative to A
                            // Interpolate width based on height at barY
                            // Actually just fix coordinates approx
                            const x1 = startX + widthA * 0.25;
                            const x2 = startX + widthA * 0.75;
                            p.tx = x1 + (x2 - x1) * barProg + jitterX;
                            p.ty = barY + jitterY;
                        }
                    } else {
                        // Letter K
                        const startXK = startX + widthA + gap;
                        // 40% Vertical, 30% Top Diag, 30% Bottom Diag
                        if (progress < 0.4) {
                            // Vertical |
                            const vProg = progress / 0.4;
                            p.tx = startXK + jitterX;
                            p.ty = topY + (bottomY - topY) * vProg + jitterY;
                        } else if (progress < 0.7) {
                            // Top Diag /
                            const dProg = (progress - 0.4) / 0.3;
                            const x1 = startXK + strokeWidth/2; // Start from vertical
                            const y1 = cy + 10;
                            const x2 = startXK + widthK;
                            const y2 = topY;
                            p.tx = x1 + (x2 - x1) * dProg + jitterX;
                            p.ty = y1 + (y2 - y1) * dProg + jitterY;
                        } else {
                            // Bottom Diag \
                            const dProg = (progress - 0.7) / 0.3;
                            const x1 = startXK + strokeWidth/2;
                            const y1 = cy + 10;
                            const x2 = startXK + widthK;
                            const y2 = bottomY;
                            p.tx = x1 + (x2 - x1) * dProg + jitterX;
                            p.ty = y1 + (y2 - y1) * dProg + jitterY;
                        }
                    }
                });
            } else if (type === 'nyc') {
                // NYC Skyline
                // Define buildings as width percentages and relative heights
                const baseY = cy + 60;
                const totalW = 320;
                const startX = cx - totalW / 2;
                
                // Building definitions: [width, height]
                const buildings = [
                    [40, 60],  // Small left
                    [50, 100], // Mid left
                    [40, 160], // Tallest (Spire)
                    [60, 120], // Wide tall
                    [50, 80],  // Mid right
                    [40, 50],  // Small right
                    [40, 70]   // End right
                ];

                particles.forEach((p, i) => {
                    // Assign each particle to a building based on index
                    const bIndex = i % buildings.length;
                    const bData = buildings[bIndex];
                    const bW = bData[0];
                    const bH = bData[1];
                    
                    // Calculate X position of this building
                    let currentX = startX;
                    for(let k=0; k<bIndex; k++) currentX += buildings[k][0];
                    
                    // Random pos within building rect
                    p.tx = currentX + Math.random() * bW;
                    p.ty = baseY - Math.random() * bH;
                });

            } else if (type === 'arch') {
                // St. Louis Arch
                // Inverted Catenary / Parabola
                const baseY = cy + 60;
                const archWidth = 220;
                const archHeight = 160;
                const thickness = 25; // Arch gets thinner at top really, but uniform is ok for particles
                
                particles.forEach((p, i) => {
                    // t goes from -1 to 1
                    const t = (i / count) * 2 - 1; 
                    
                    // Basic Parabola: y = H * (1 - t^2)
                    // We want to fill the space between an outer and inner curve
                    // But simpler: Defines centerline and add thickness
                    
                    const x = t * (archWidth / 2);
                    // Flatten the top slightly for catenary look or use parabola
                    // Parabola:
                    const curveY = archHeight * (1 - t*t);
                    
                    // Taper thickness: Thicker at base (t=1), thinner at top (t=0)
                    const currentThick = thickness * (0.5 + 0.5 * Math.abs(t) * 1.5); 
                    
                    const offsetY = (Math.random() - 0.5) * currentThick;
                    
                    p.tx = cx + x;
                    p.ty = baseY - curveY + offsetY;
                });
            }
        }

        function returnToRandom() {
            if (interactionMode === 'random') return; // Already random
            interactionMode = 'random';
            
            // Explosion Effect!
            // Calculate center
            const cx = width / 2;
            const cy = height / 2;

            particles.forEach(p => {
                // Vector from center
                const dx = p.x - cx;
                const dy = p.y - cy;
                const angle = Math.atan2(dy, dx);
                
                // Assign a high outward velocity (Explosion)
                const burstSpeed = 8 + Math.random() * 8; // Fast!
                p.vx = Math.cos(angle) * burstSpeed;
                p.vy = Math.sin(angle) * burstSpeed;
            });
        }

        function draw() {
            ctx.clearRect(0, 0, width, height);
            
            // Background style based on mode? 
            // Stick to dark
            ctx.fillStyle = '#050505';
            ctx.fillRect(0, 0, width, height);

            particles.forEach((p, i) => {
                if (interactionMode === 'shape') {
                    // Lerp to target
                    p.x += (p.tx - p.x) * 0.08;
                    p.y += (p.ty - p.y) * 0.08;
                } else {
                    // Random movement with Friction/Drag for Explosion Recovery
                    
                    // 1. Move
                    p.x += p.vx;
                    p.y += p.vy;

                    // 2. Friction logic
                    // Calculate current speed
                    const currentSpeed = Math.sqrt(p.vx * p.vx + p.vy * p.vy);
                    const normalSpeed = 0.5; // Target cruising speed
                    
                    if (currentSpeed > normalSpeed) {
                        // Decelerate
                        p.vx *= 0.94; // Drag factor
                        p.vy *= 0.94;
                    }

                    // 3. Bounce
                    if (p.x < 0 || p.x > width) p.vx *= -1;
                    if (p.y < 0 || p.y > height) p.vy *= -1;

                    // Mouse Repel (Only in random mode)
                    const dx = mouseX - p.x;
                    const dy = mouseY - p.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const forceDistance = 150;

                    if (distance < forceDistance) {
                        const force = (forceDistance - distance) / forceDistance;
                        const forceDirectionX = dx / distance;
                        const forceDirectionY = dy / distance;
                        p.x -= forceDirectionX * force * 3;
                        p.y -= forceDirectionY * force * 3;
                    }
                }

                // Draw Particle
                const opacity = 0.2 + (p.z * 0.2);
                ctx.fillStyle = `rgba(255, 255, 255, ${interactionMode === 'shape' ? 0.6 : opacity})`;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();

                // Connect Lines (Only in random mode for cleaner shapes)
                if (interactionMode === 'random') {
                    for (let j = i + 1; j < particles.length; j++) {
                        const p2 = particles[j];
                        const dx2 = p.x - p2.x;
                        const dy2 = p.y - p2.y;
                        const dist = Math.sqrt(dx2 * dx2 + dy2 * dy2);

                        if (dist < 150) {
                            ctx.strokeStyle = `rgba(100, 100, 100, ${0.15 * (1 - dist / 150)})`;
                            ctx.lineWidth = 0.5;
                            ctx.beginPath();
                            ctx.moveTo(p.x, p.y);
                            ctx.lineTo(p2.x, p2.y);
                            ctx.stroke();
                        }
                    }
                }
            });

            requestAnimationFrame(draw);
        }

        window.addEventListener('resize', resize);
        resize();
        draw();
        
        // Keydown Listener for "AK" Mode
        window.addEventListener('keydown', (e) => {
            if (e.key === '0') {
                if (isAKMode) {
                    // Turn OFF
                    isAKMode = false;
                    returnToRandom();
                } else {
                    // Turn ON
                    isAKMode = true;
                    formShape('AK');
                }
            }
        });

        // Footer icons styling specific class
        document.querySelectorAll('.footer-icon').forEach(icon => {
            icon.classList.add('p-4', 'bg-white/5', 'rounded-full', 'hover:bg-white/10', 'hover:scale-110', 'transition-all', 'duration-300', 'group', 'border', 'border-white/10', 'hover:border-blue-500/50');
        });

        // Event Listeners for Particle Shapes
        // Wrapper function to guard against AK mode
        function triggerShape(type) {
            if (isAKMode) return; // Don't interrupt AK mode
            formShape(type);
        }
        function triggerRandom() {
            if (isAKMode) return; // Don't interrupt AK mode
            returnToRandom();
        }

        const cpuProject = document.getElementById('project-cpu');
        const recordProject = document.getElementById('project-record');
        
        // Experience items
        const expInfinite = document.getElementById('exp-infinite');
        const expCbn = document.getElementById('exp-cbn');
        const expSavny = document.getElementById('exp-savny');
        const expNyu = document.getElementById('exp-nyu');
        
        // WashU Items
        const wCyc = document.getElementById('washu-cyc');
        const wWc = document.getElementById('washu-wc');
        const wSif = document.getElementById('washu-sif');
        const wKwur = document.getElementById('washu-kwur');
        const wStrike = document.getElementById('washu-strike');
        const wAshoka = document.getElementById('washu-ashoka');

        if (cpuProject) {
            cpuProject.addEventListener('mouseenter', () => triggerShape('cpu'));
            cpuProject.addEventListener('mouseleave', triggerRandom);
        }

        if (recordProject) {
            recordProject.addEventListener('mouseenter', () => triggerShape('record'));
            recordProject.addEventListener('mouseleave', triggerRandom);
        }
        
        if (expInfinite) {
            expInfinite.addEventListener('mouseenter', () => triggerShape('infinity'));
            expInfinite.addEventListener('mouseleave', triggerRandom);
        }
        
        if (expCbn) {
            expCbn.addEventListener('mouseenter', () => triggerShape('cbn'));
            expCbn.addEventListener('mouseleave', triggerRandom);
        }
        
        if (expSavny) {
            expSavny.addEventListener('mouseenter', () => triggerShape('globe'));
            expSavny.addEventListener('mouseleave', triggerRandom);
        }
        
        if (expNyu) {
            expNyu.addEventListener('mouseenter', () => triggerShape('nyu'));
            expNyu.addEventListener('mouseleave', triggerRandom);
        }

        // WashU Listeners
        if (wCyc) {
            wCyc.addEventListener('mouseenter', () => triggerShape('community'));
            wCyc.addEventListener('mouseleave', triggerRandom);
        }
        if (wWc) {
            wWc.addEventListener('mouseenter', () => triggerShape('community'));
            wWc.addEventListener('mouseleave', triggerRandom);
        }
        if (wSif) {
            wSif.addEventListener('mouseenter', () => triggerShape('stock'));
            wSif.addEventListener('mouseleave', triggerRandom);
        }
        if (wKwur) {
            wKwur.addEventListener('mouseenter', () => triggerShape('wave'));
            wKwur.addEventListener('mouseleave', triggerRandom);
        }
        if (wStrike) {
            wStrike.addEventListener('mouseenter', () => triggerShape('music'));
            wStrike.addEventListener('mouseleave', triggerRandom);
        }
        if (wAshoka) {
            wAshoka.addEventListener('mouseenter', () => triggerShape('globe'));
            wAshoka.addEventListener('mouseleave', triggerRandom);
        }
        
        // Location Hover Listeners
        const locNyc = document.getElementById('loc-nyc');
        const locStl = document.getElementById('loc-stl');

        if (locNyc) {
            locNyc.addEventListener('mouseenter', () => triggerShape('nyc'));
            locNyc.addEventListener('mouseleave', triggerRandom);
        }
        if (locStl) {
            locStl.addEventListener('mouseenter', () => triggerShape('arch'));
            locStl.addEventListener('mouseleave', triggerRandom);
        }
        
    </script>
</body>
</html>
